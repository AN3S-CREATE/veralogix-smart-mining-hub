# Recommendations for Veralogix Smart Mining Hub Prototype

## 1. Feature Enhancements

### **AI & Data Intelligence**
*   **Context-Aware Chat:** Enhance the `natural-language-query` flow to inject more context from the currently viewed page (e.g., if on the "Fleet" page, prioritize fleet-related answers).
*   **Predictive Models:** The current predictive maintenance is rule-based or mock. Consider integrating a lightweight TensorFlow.js model or calling a real Vertex AI endpoint for actual anomaly detection on the `sensor` data streams.
*   **Voice Input:** For the "Ops Copilot" and "Shift Handover" features, adding voice-to-text (Web Speech API) would significantly improve usability for operators in the field.

### **Operational Modules**
*   **Map Integration:** The `MissionMapCard` and `LiveHaulMapCard` currently use static or placeholder maps. Integrating Mapbox GL JS or Google Maps Platform with real-time asset markers would add massive value.
*   **Offline Mode:** For a mining environment, robust offline support is critical. While Firestore has offline persistence, implementing a Service Worker (PWA) to cache the app shell and critical assets would improve reliability in low-connectivity zones.
*   **Real-time Telemetry:** Replace the polling mechanism (if any) or standard Firestore listeners with optimized snapshots for high-frequency data like sensor readings to reduce read costs and improve UI responsiveness.

## 2. Codebase & Architecture

### **Performance Optimization**
*   **Virtualization:** The `ModuleDataTable` component renders all rows. For large datasets (logs, alerts), implement `tanstack-virtual` or `react-window` to handle thousands of rows efficiently.
*   **Image Optimization:** Ensure all asset images (especially in the `PlaceHolderImages` library) are properly sized and served in Next.js optimized formats (`.webp`).
*   **Bundle Size:** Analyze the build bundle. Large libraries like `recharts` or `lucide-react` (if not tree-shaken correctly) can bloat the initial load. Verify imports are granular.

### **Maintainability**
*   **Type Safety:** Stricter TypeScript checks. There are a few `any` types in the data handling logic (e.g., `ModuleDataTable`). Define robust Zod schemas for all Firestore documents to ensure runtime type safety.
*   **Testing:** Add unit tests for critical utility functions (unit conversion, risk calculation) and integration tests for the main flows (Login -> Dashboard -> Report).
*   **Component Library:** As the app grows, extracting common UI patterns (like the "KPI Tile" or "Widget Shell") into a dedicated internal package or just a cleaner folder structure would help.

## 3. UI/UX Refinements

### **Visual Polish**
*   **Micro-interactions:** Add more subtle animations. For example, when a KPI updates, the number could "count up." When an alert status changes, the row could flash briefly.
*   **Mobile Experience:** rigorous testing on tablet/mobile resolutions. The sidebar and complex grids (like the heatmap or sensor matrix) need to be verified for touch friendliness.
*   **Dark Mode Consistency:** Ensure all charts and third-party components strictly adhere to the new "Deepest Background" (`#0B0E15`) and "Electric Lime" (`#D2FF05`) palette. Some default chart colors might need overriding.

## 4. Security & Compliance

### **Data Safety**
*   **Firestore Rules:** The current rules might be permissive for the prototype. Implement strict `@request.auth.token.tenantId == resource.data.tenantId` checks for every collection to prevent cross-tenant data leaks.
*   **Audit Logging:** Ensure *every* write action (create, update, delete) triggers a Cloud Function to write to the `auditLog` collection. This is non-negotiable for enterprise mining compliance.

## 5. Deployment Strategy

### **CI/CD**
*   **Pipeline:** Set up a GitHub Actions workflow that runs `npm run typecheck`, `npm run lint`, and `npm run build` on every PR.
*   **Staging vs. Prod:** Configure separate Firebase projects for "Staging" (for testing new AI models) and "Production".

---
*Generated by Veralogix AI Assistant - Prototype Review*
